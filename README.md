# 📦 @avonrylew/events
A lightweight, strongly typed, featureful and high-performance event emitter for modern JavaScript runtimes.
Built with speed, simplicity and feature completeness in mind.

## ⚙️ Installation

```bash
npm install @avonrylew/events
# or
bun add @avonrylew/events
```

## 🧩 Overview

```typescript
const emitter = new EventEmitter<MyEvents>();

// Register listeners
emitter.on("event", handler);
emitter.once("event", handler);

// Emit events
emitter.emit("event", ...args);

// Remove listeners
emitter.off("event", handler);
emitter.clear();          // Remove all
emitter.clear("event");   // Remove specific

// Utility
emitter.onAny((name, ...args) => console.log(name, args));
emitter.offAny(fn);
emitter.count("event");   // Listener count
emitter.names();          // All event names
await emitter.wait("ready", 1000); // Promise-based wait with timeout
emitter.max(20);          // Set max listeners
```
## 🧩 Usage
```typescript
import { EventEmitter ) from '@avonrylew/events';

interface Events {
  ready: () => void;
  data: (value: string) => void;
}

const emitter = new EventEmitter<Events>();

emitter.on("ready", () => console.log("Ready!"));
emitter.emit("ready");
```
check [demos](https://github.com/avonryle/events/tree/main/demos) for more detailed examples.

## 🚀 Features

| Feature                  | @avonrylew/events | tseep | tiny-typed-emitter | eventemitter3 |
|--------------------------|-------------------|-------|--------------------|---------------|
| on() / once() / off()    | ✅                | ✅    | ✅                 | ✅            |
| Wildcard onAny() / offAny() | ✅             | ❌    | ❌                 | ❌            |
| clear() (all / specific) | ✅                | ❌    | ✅                  | ✅            |
| count() listener count   | ✅                | ❌    | ⚠️ Partial         | ✅            |
| names() list event names | ✅                | ❌    | ❌                 | ✅            |
| wait() Promise-based listener | ✅           | ❌    | ❌                 | ❌            |
| max() limit max listeners | ✅               | ❌    | ❌                 | ❌            |
| TypeScript generic support | ✅ Strong       | ✅    | ✅                 | ⚠️ Partial    |
| Lightweight (unpacked size)    | ✅ 5.46 kB               | ✅ 105 kB    | ✅ 5.3 kB                  | ✅ 73.4 kB      | 
# Event Emitter Libraries Comparison

## 🧠 Memory Usage Comparison
The following table shows the memory consumption when creating 1000 instances with 10 listeners each (measured on Bun runtime with GC exposed):
| Library | Heap Δ (MB) | RSS Δ (MB) | Total Δ (MB) |
|---------|-------------|------------|--------------|
| @avonrylew/events | 0.03 | 6.45 | 6.49 |
| tseep | 0.08 | 8.39 | 8.54 |
| tiny-typed-emitter | 0.04 | 0.39 | 0.46 |
| eventemitter3 | 0.00 | 0.63 | 0.63 |

this table was generated by the help of [memory](https://github.com/avonryle/events/blob/main/__tests__/memory.ts).
## ⚡Performance Benchmark
Performance benchmarks measured using [benchmark.ts](https://github.com/avonryle/events/blob/main/__tests__/benchmark.ts) (average of 90+ samples on Bun runtime):
| Test | @avonrylew/events | tseep | tiny-typed-emitter | eventemitter3 |
|------|---------------|-------|--------------------|---------------|
| on + emit (1 listener) | 264,693 ops/s ⚡| 168,335 ops/s | 29,327 ops/s | 107,063 ops/s |
| on + emit (10 listeners) | 41,470 ops/s ⚡| 33,064 ops/s | 22,017 ops/s | 32,549 ops/s |
| once + emit | 28,101 | 60,102 ⚡ | 3,042 | 18,849 |
| emit (multi args) | 48,077 | 65,541 ⚡ | 17,065 | 49,568 |
| on + off | 23,587 | 20,947 | 4,242 | 31,722 ⚡ |

