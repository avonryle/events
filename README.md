# ğŸ“¦ @avonrylew/events
A lightweight, strongly typed, featureful and high-performance event emitter for modern JavaScript runtimes.
Built with speed, simplicity and feature completeness in mind.

## âš™ï¸ Installation

```bash
npm install @avonrylew/events
# or
bun add @avonrylew/events
```

## ğŸ§© Overview

```typescript
const emitter = new EventEmitter<MyEvents>();

// Register listeners
emitter.on("event", handler);
emitter.once("event", handler);

// Emit events
emitter.emit("event", ...args);

// Remove listeners
emitter.off("event", handler);
emitter.clear();          // Remove all
emitter.clear("event");   // Remove specific

// Utility
emitter.onAny((name, ...args) => console.log(name, args));
emitter.offAny(fn);
emitter.count("event");   // Listener count
emitter.names();          // All event names
await emitter.wait("ready", 1000); // Promise-based wait with timeout
emitter.max(20);          // Set max listeners
```
## ğŸ§© Usage
```typescript
import { EventEmitter ) from '@avonrylew/events';

interface Events {
  ready: () => void;
  data: (value: string) => void;
}

const emitter = new EventEmitter<Events>();

emitter.on("ready", () => console.log("Ready!"));
emitter.emit("ready");
```
check [demos](https://github.com/avonryle/events/tree/main/demos) for more detailed examples.

## ğŸš€ Features

| Feature                  | @avonrylew/events | tseep | tiny-typed-emitter | eventemitter3 |
|--------------------------|-------------------|-------|--------------------|---------------|
| on() / once() / off()    | âœ…                | âœ…    | âœ…                 | âœ…            |
| Wildcard onAny() / offAny() | âœ…             | âŒ    | âŒ                 | âŒ            |
| clear() (all / specific) | âœ…                | âŒ    | âœ…                  | âœ…            |
| count() listener count   | âœ…                | âŒ    | âš ï¸ Partial         | âœ…            |
| names() list event names | âœ…                | âŒ    | âŒ                 | âœ…            |
| wait() Promise-based listener | âœ…           | âŒ    | âŒ                 | âŒ            |
| max() limit max listeners | âœ…               | âŒ    | âŒ                 | âŒ            |
| TypeScript generic support | âœ… Strong       | âœ…    | âœ…                 | âš ï¸ Partial    |
| Lightweight (unpacked size)    | âœ… 5.46 kB               | âœ… 105 kB    | âœ… 5.3 kB                  | âœ… 73.4 kB      | 
# Event Emitter Libraries Comparison

## ğŸ§  Memory Usage Comparison
The following table shows the memory consumption when creating 1000 instances with 10 listeners each (measured on Bun runtime with GC exposed):
| Library | Heap Î” (MB) | RSS Î” (MB) | Total Î” (MB) |
|---------|-------------|------------|--------------|
| @avonrylew/events | 0.03 | 6.45 | 6.49 |
| tseep | 0.08 | 8.39 | 8.54 |
| tiny-typed-emitter | 0.04 | 0.39 | 0.46 |
| eventemitter3 | 0.00 | 0.63 | 0.63 |

this table was generated by the help of [memory](https://github.com/avonryle/events/blob/main/__tests__/memory.ts).
## âš¡Performance Benchmark
Performance benchmarks measured using [benchmark.ts](https://github.com/avonryle/events/blob/main/__tests__/benchmark.ts) (average of 90+ samples on Bun runtime):
| Test | @avonrylew/events | tseep | tiny-typed-emitter | eventemitter3 |
|------|---------------|-------|--------------------|---------------|
| on + emit (1 listener) | 264,693 ops/s âš¡| 168,335 ops/s | 29,327 ops/s | 107,063 ops/s |
| on + emit (10 listeners) | 41,470 ops/s âš¡| 33,064 ops/s | 22,017 ops/s | 32,549 ops/s |
| once + emit | 28,101 | 60,102 âš¡ | 3,042 | 18,849 |
| emit (multi args) | 48,077 | 65,541 âš¡ | 17,065 | 49,568 |
| on + off | 23,587 | 20,947 | 4,242 | 31,722 âš¡ |

